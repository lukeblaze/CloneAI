<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Website Cloner</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo-section">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <rect width="32" height="32" rx="8" fill="url(#logoGradient)"/>
                    <path d="M10 16L14 12L18 16L22 12" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <circle cx="14" cy="12" r="1.5" fill="white"/>
                    <circle cx="18" cy="16" r="1.5" fill="white"/>
                    <defs>
                        <linearGradient id="logoGradient" x1="0" y1="0" x2="32" y2="32">
                            <stop offset="0%" stop-color="#667eea"/>
                            <stop offset="100%" stop-color="#764ba2"/>
                        </linearGradient>
                    </defs>
                </svg>
                <span class="logo-text">Clone AI</span>
            </div>
            <button class="new-chat-btn" onclick="resetChat()">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                    <path d="M9 3V15M3 9H15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                New Clone
            </button>
            <button class="new-chat-btn" onclick="startCollaborationSession()" style="margin-top: 0.5rem;">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                    <circle cx="5" cy="8" r="2" stroke="currentColor" stroke-width="1.5"/>
                    <circle cx="13" cy="8" r="2" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M5 10v3c0 1 1 2 3 2h2c2 0 3-1 3-2v-3" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M12 12h3m0 0l-1 1m1-1l-1-1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                Collaborate
            </button>
            <button class="new-chat-btn" onclick="initializeGit()" style="margin-top: 0.5rem;">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                    <circle cx="9" cy="9" r="7" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M6 9l2 2 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                Init Git
            </button>
            <button class="new-chat-btn" onclick="showAnalyticsDashboard()" style="margin-top: 0.5rem;">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                    <rect x="2" y="7" width="3" height="8" rx="1" stroke="currentColor" stroke-width="1.5"/>
                    <rect x="7" y="3" width="3" height="12" rx="1" stroke="currentColor" stroke-width="1.5"/>
                    <rect x="12" y="5" width="3" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                </svg>
                Analytics
            </button>
        </div>
        
        <div class="sidebar-content">
            <div class="history-section">
                <h3>Recent</h3>
                <div id="historyList" class="history-list">
                    <div class="empty-state">
                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                            <circle cx="20" cy="20" r="18" stroke="currentColor" stroke-width="2" opacity="0.2"/>
                            <path d="M20 14V20L24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" opacity="0.4"/>
                        </svg>
                        <p>No history yet</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="sidebar-footer">
            <div class="user-profile">
                <div class="avatar">AI</div>
                <div class="user-info">
                    <span class="user-name">Website Cloner</span>
                    <span class="user-status">Ready</span>
                </div>
            </div>
        <div class="sidebar-footer">
            <button class="clear-history-btn" onclick="clearAllHistory()">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M2 4H14M12 4V13C12 13.5 11.5 14 11 14H5C4.5 14 4 13.5 4 13V4M6 4V3C6 2.5 6.5 2 7 2H9C9.5 2 10 2.5 10 3V4" stroke="currentColor" stroke-width="1.5"/>
                </svg>
                Clear History
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Preview Panel (Hidden by default) -->
        <div class="preview-panel" id="previewPanel" style="display: none;">
            <div class="preview-header">
                <div class="preview-title">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <rect x="2" y="3" width="12" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M2 6H14" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    <span id="previewUrlTitle">Live Preview</span>
                </div>
                <div class="preview-controls">
                    <div class="device-selector">
                        <button class="device-btn active" data-device="desktop" onclick="setDevice('desktop')">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <rect x="2" y="3" width="12" height="8" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M6 11V13M10 11V13M5 13H11" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                        </button>
                        <button class="device-btn" data-device="tablet" onclick="setDevice('tablet')">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <rect x="4" y="2" width="8" height="12" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                <circle cx="8" cy="12" r="0.5" fill="currentColor"/>
                            </svg>
                        </button>
                        <button class="device-btn" data-device="mobile" onclick="setDevice('mobile')">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <rect x="5" y="2" width="6" height="12" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                <circle cx="8" cy="12" r="0.5" fill="currentColor"/>
                            </svg>
                        </button>
                        <button class="device-btn" onclick="showResponsiveTester()" title="More Devices">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <circle cx="4" cy="8" r="1" fill="currentColor"/>
                                <circle cx="8" cy="8" r="1" fill="currentColor"/>
                                <circle cx="12" cy="8" r="1" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                    <button class="preview-close-btn" onclick="closePreview()">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M4 4L12 12M12 4L4 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="preview-body">
                <div class="preview-comparison">
                    <div class="preview-frame-container" id="previewContainer">
                        <div class="preview-label">Original Website</div>
                        <iframe id="previewIframe" frameborder="0" sandbox="allow-same-origin allow-scripts allow-forms"></iframe>
                        <div class="preview-loading" id="previewLoading">
                            <div class="loader"></div>
                            <p>Loading original...</p>
                        </div>
                    </div>
                    <div class="preview-frame-container" id="clonedPreviewContainer" style="display: none;">
                        <div class="preview-label">Cloned Website</div>
                        <iframe id="clonedPreviewIframe" frameborder="0" sandbox="allow-same-origin allow-scripts allow-forms"></iframe>
                        <div class="preview-loading" id="clonedPreviewLoading" style="display: none;">
                            <div class="loader"></div>
                            <p>Loading clone...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Code Editor Panel (Hidden by default) -->
        <div class="editor-panel" id="editorPanel" style="display: none;">
            <div class="editor-header">
                <div class="editor-tabs">
                    <button class="editor-tab active" data-lang="html" onclick="switchEditorTab('html')">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                            <path d="M2 4H12M2 7H12M2 10H8" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        HTML
                    </button>
                    <button class="editor-tab" data-lang="css" onclick="switchEditorTab('css')">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                            <path d="M7 2L12 7L7 12L2 7L7 2Z" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        CSS
                    </button>
                    <button class="editor-tab" data-lang="javascript" onclick="switchEditorTab('javascript')">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                            <rect x="2" y="2" width="10" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M5 5L8 7L5 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        JS
                    </button>
                </div>
                <div class="editor-actions">
                    <button class="action-btn" onclick="requestCodeSuggestion()" title="Get AI suggestions for code">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                            <path d="M7 1C3.5 1 1 3.5 1 7s2.5 6 6 6 6-2.5 6-6-2.5-6-6-6z" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M7 4v3M7 9v.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        Suggest
                    </button>
                    <button class="action-btn" onclick="updatePreview()">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                            <path d="M7 2C3.5 2 2 7 2 7s1.5 5 5 5 5-5 5-5-1.5-5-5-5z" stroke="currentColor" stroke-width="1.5"/>
                            <circle cx="7" cy="7" r="1.5" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        Update Preview
                    </button>
                    <button class="action-btn primary" onclick="downloadEditedCode()">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                            <path d="M7 2V10M7 10L4 7M7 10L10 7M2 12H12" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        Download
                    </button>
                    <button class="editor-close-btn" onclick="closeEditor()">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                            <path d="M3 3L11 11M11 3L3 11" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="editor-body">
                <div id="monacoEditor"></div>
            </div>
        </div>

        <!-- Chat Container -->
        <div class="chat-container">
            <div class="chat-messages" id="chatMessages">
                <!-- Welcome Message -->
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-content">
                        <h1>Clone Any Website</h1>
                        <p>Enter a URL and I'll analyze its structure, design, and create a complete workspace for you</p>
                        
                        <div class="feature-cards">
                            <div class="feature-card">
                                <div class="feature-icon">üé®</div>
                                <h3>Full Design Analysis</h3>
                                <p>Colors, fonts, layout structure</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">üìÅ</div>
                                <h3>Complete Workspace</h3>
                                <p>HTML, CSS, JS with proper folders</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">‚ö°</div>
                                <h3>Production Ready</h3>
                                <p>Clean, organized, deployable code</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Input Area -->
            <div class="input-container">
                <div class="input-wrapper">
                    <input 
                        type="url" 
                        id="urlInput" 
                        placeholder="Enter website URL (e.g., https://example.com)"
                        autocomplete="off"
                    >
                    <button class="send-btn" id="analyzeBtn" onclick="analyzeWebsite()">
                        <span id="btnIcon">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M18 2L9 11M18 2L12 18L9 11M18 2L2 8L9 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                        <span id="loader" class="loader" style="display: none;"></span>
                    </button>
                </div>
                <p class="input-hint">Press Enter to analyze or click send</p>
            </div>
        </div>
    </main>

    <script src="app.js"></script>
</body>
</html>

        <div id="results" class="results glass" style="display: none;">
            <div class="tabs">
                <button class="tab active" onclick="showTab('preview', event)">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <rect x="2" y="2" width="14" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
                        <path d="M6 2V16M12 2V16" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    Preview
                </button>
                <button class="tab" onclick="showTab('analysis', event)">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path d="M2 14L6 10L10 14L16 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="6" cy="10" r="2" fill="currentColor"/>
                        <circle cx="10" cy="14" r="2" fill="currentColor"/>
                    </svg>
                    Analysis
                </button>
                <button class="tab" onclick="showTab('code', event)">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path d="M5 13L2 9L5 5M13 5L16 9L13 13M11 2L7 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Code
                </button>
            </div>

            <div id="previewTab" class="tab-content active">
                <h3>üì∏ Original Website</h3>
                <div class="screenshot-wrapper">
                    <img id="screenshot" alt="Website screenshot" />
                </div>
                
                <div class="generate-section">
                    <label for="customDescription">Customize your clone (optional)</label>
                    <textarea 
                        id="customDescription" 
                        placeholder="E.g., Change the color scheme to dark mode, make it more minimalist..."
                        rows="3"
                    ></textarea>
                    <button class="primary-btn" onclick="generateClone()">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 2L12 8L18 10L12 12L10 18L8 12L2 10L8 8L10 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Generate Clone
                    </button>
                </div>
            </div>

            <div id="analysisTab" class="tab-content">
                <h3>üîç Website Analysis</h3>
                <div id="analysisData" class="analysis-grid"></div>
            </div>

            <div id="codeTab" class="tab-content">
                <h3>üíª Generated Code</h3>
                <div class="code-section">
                    <div class="code-header">
                        <h4>
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M2 4H14M2 8H14M2 12H10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            HTML
                        </h4>
                        <button class="copy-btn" onclick="copyCode('htmlCode', event)">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <rect x="4" y="4" width="8" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M8 4V2H14V12H12" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                            Copy
                        </button>
                    </div>
                    <pre><code id="htmlCode"></code></pre>
                </div>
                <div class="code-section">
                    <div class="code-header">
                        <h4>
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M8 2L14 8L8 14L2 8L8 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                            </svg>
                            CSS
                        </h4>
                        <button class="copy-btn" onclick="copyCode('cssCode', event)">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <rect x="4" y="4" width="8" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M8 4V2H14V12H12" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                            Copy
                        </button>
                    </div>
                    <pre><code id="cssCode"></code></pre>
                </div>
                <div class="download-section">
                    <button class="secondary-btn" onclick="downloadCode()">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 2V14M10 14L6 10M10 14L14 10M4 18H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Download All Files
                    </button>
                </div>
            </div>
        </div>

        <div id="error" class="error glass" style="display: none;"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>
